"use strict";var PBI=PBI||{};PBI.Session=function(n){var c=3e5,l,e,o,i,s,u,r,t=ko.observable(!1),a=function(e){s=e;PBI.sendAjax({url:PBI.baseHref+"SessionTimeout/GetSessionTime",type:"POST"},function(n){u=n.sessionTimestamp},function(){t(!1)});o=e*.25<=c?e*.75:e-c;r=n.setTimeout(f,s);i=n.setTimeout(h,o)},f=function(){n.location.href=PBI.appendPageNonce(PBI.baseHref+"Logout?wasSessionTimedOut=true")},v=function(){n.location.href=PBI.appendPageNonce(PBI.baseHref+"Logout")},y=function(u,e){t(!1);n.clearTimeout(r);n.clearTimeout(i);r=n.setTimeout(f,u);i=n.setTimeout(h,e)},p=function(){t(!1);n.clearTimeout(r);n.clearTimeout(i);r=n.setTimeout(f,s);i=n.setTimeout(h,o)},h=function(){PBI.sendAjax({url:PBI.baseHref+"SessionTimeout/Index",data:{clientSessionTime:u},type:"POST"},function(n){n.errorMessage||(n.isSessionTimingOut?(t(!0),l=document.activeElement,e=$(document.activeElement).closest("[tabindex='-1']"),e.removeAttr("tabindex"),$(".prompt").removeClass("prompt--hidden").attr("aria-hidden",!1).before('<div class="prompt__overlay"><\/div>'),$("#inactivityWarningContinue")[0].focus()):(u=n.sessionTimestamp,y(n.timeRemainingForSessionExpiration,n.timeRemainingToShowModal)))},function(){t(!1)})},w=function(){return l},b=function(){return e},k=function(){PBI.sendAjax({url:PBI.baseHref+"SessionTimeout/ContinueSession",type:"POST"},function(n){u=n.currentTimestamp;p()},function(){t(!1)})};return{continueSession:k,expireSession:f,lastElementSelected:w,logout:v,parentModalPopup:b,showModal:t,start:a}}(window)